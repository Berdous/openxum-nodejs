extends ../../../layouts/account

block head
  title Account Settings

block feet
  script(src='/views/account/settings/index.min.js?#{cacheBreaker}')

block body
  div.row
    div.col-xs-12
      div.page-header
        h1 Account Settings
  div.row
    div.col-sm-9
      div#details
      div#identity
      div#password
    div.col-sm-3
      if oauthTwitter || oauthGitHub || oauthFacebook || oauthGoogle || oauthTumblr
        legend Social Connections
        if oauthMessage
          div.alerts
            div.alert.alert-info.alert-dismissable
              button.close(type='button', data-dismiss='alert') &times;
              |#{oauthMessage}
        if oauthTwitter
          if oauthTwitterActive
            a.btn.btn-block.btn-danger(href='/account/settings/twitter/disconnect/')
              i.fa.fa-twitter.fa-lg
              |  Disconnect Twitter
          else
            a.btn.btn-block.btn-default(href='/account/settings/twitter/')
              i.fa.fa-twitter.fa-lg
              |  Connect Twitter
        if oauthGitHub
          if oauthGitHubActive
            a.btn.btn-block.btn-danger(href='/account/settings/github/disconnect/')
              i.fa.fa-github.fa-lg
              |  Disconnect GitHub
          else
            a.btn.btn-block.btn-default(href='/account/settings/github/')
              i.fa.fa-github.fa-lg
              |  Connect GitHub
        if oauthFacebook
          if oauthFacebookActive
            a.btn.btn-block.btn-danger(href='/account/settings/facebook/disconnect/')
              i.fa.fa-facebook-square.fa-lg
              |  Disconnect Facebook
          else
            a.btn.btn-block.btn-default(href='/account/settings/facebook/')
              i.fa.fa-facebook-square.fa-lg
              |  Connect Facebook
        if oauthGoogle
          if oauthGoogleActive
            a.btn.btn-block.btn-danger(href='/account/settings/google/disconnect/')
              i.fa.fa-google-plus-square.fa-lg
              |  Disconnect Google
          else
            a.btn.btn-block.btn-default(href='/account/settings/google/')
              i.fa.fa-google-plus-square.fa-lg
              |  Connect Google
        if oauthTumblr
          if oauthTumblrActive
            a.btn.btn-block.btn-danger(href='/account/settings/tumblr/disconnect/')
              i.fa.fa-tumblr-square.fa-lg
              |  Disconnect Tumblr
          else
            a.btn.btn-block.btn-default(href='/account/settings/tumblr/')
              i.fa.fa-tumblr-square.fa-lg
              |  Connect Tumblr

  script(type='text/template', id='tmpl-details')
    fieldset
      legend Contact Info
      div.alerts
        |<% _.each(errors, function(err) { %>
        div.alert.alert-danger.alert-dismissable
          |<%- err %>
        |<% }); %>
        |<% if (success) { %>
        div.alert.alert-info.alert-dismissable
          button.close(type='button', data-dismiss='alert') &times;
          | Changes have been saved.
        |<% } %>
      div.form-group(class!='<%- errfor.first ? "has-error" : "" %>')
        label First Name:
        input.form-control(type='text', name='first', value!='<%- first %>')
        span.help-block <%- errfor.first %>
      div.form-group(class!='<%- errfor.middle ? "has-error" : "" %>')
        label Middle Name:
        input.form-control(type='text', name='middle', value!='<%- middle %>')
        span.help-block <%- errfor.middle %>
      div.form-group(class!='<%- errfor.last ? "has-error" : "" %>')
        label Last Name:
        input.form-control(type='text', name='last', value!='<%- last %>')
        span.help-block <%- errfor['last'] %>

      div.input-group(class!='<%- errfor.country ? "has-error" : "" %>')
        label Country:
        select.form-control(name='country')
          option(value='') -- choose --
          option(value='AF') Afghanistan
          option(value='AX') Ã…land Islands
          option(value='AL') Albania
          option(value='DZ') Algeria
          option(value='AS') American Samoa
          option(value='AD') Andorra
          option(value='AO') Angola
          option(value='AI') Anguilla
          option(value='AQ') Antarctica
          option(value='AG') Antigua and Barbuda
          option(value='AR') Argentina
          option(value='AM') Armenia
          option(value='AW') Aruba
          option(value='AU') Australia
          option(value='AT') Austria
          option(value='AZ') Azerbaijan
          option(value='BS') Bahamas
          option(value='BH') Bahrain
          option(value='BD') Bangladesh
          option(value='BB') Barbados
          option(value='BY') Belarus
          option(value='BE') Belgium
          option(value='BZ') Belize
          option(value='BJ') Benin
          option(value='BM') Bermuda
          option(value='BT') Bhutan
          option(value='BO') Bolivia
          option(value='BA') Bosnia and Herzegovina
          option(value='BW') Botswana
          option(value='BV') Bouvet Island
          option(value='BR') Brazil
          option(value='IO') British Indian Ocean Territory
          option(value='BN') Brunei Darussalam
          option(value='BG') Bulgaria
          option(value='BF') Burkina Faso
          option(value='BI') Burundi
          option(value='KH') Cambodia
          option(value='CM') Cameroon
          option(value='CA') Canada
          option(value='CV') Cape Verde
          option(value='KY') Cayman Islands
          option(value='CF') Central African Republic
          option(value='TD') Chad
          option(value='CL') Chile
          option(value='CN') China
          option(value='CX') Christmas Island
          option(value='CC') Cocos (Keeling) Islands
          option(value='CO') Colombia
          option(value='KM') Comoros
          option(value='CG') Congo
          option(value='CD') Congo, The Democratic Republic of The
          option(value='CK') Cook Islands
          option(value='CR') Costa Rica
          option(value='CI') Cote D'ivoire
          option(value='HR') Croatia
          option(value='CU') Cuba
          option(value='CY') Cyprus
          option(value='CZ') Czech Republic
          option(value='DK') Denmark
          option(value='DJ') Djibouti
          option(value='DM') Dominica
          option(value='DO') Dominican Republic
          option(value='EC') Ecuador
          option(value='EG') Egypt
          option(value='SV') El Salvador
          option(value='GQ') Equatorial Guinea
          option(value='ER') Eritrea
          option(value='EE') Estonia
          option(value='ET') Ethiopia
          option(value='FK') Falkland Islands (Malvinas)
          option(value='FO') Faroe Islands
          option(value='FJ') Fiji
          option(value='FI') Finland
          option(value='FR') France
          option(value='GF') French Guiana
          option(value='PF') French Polynesia
          option(value='TF') French Southern Territories
          option(value='GA') Gabon
          option(value='GM') Gambia
          option(value='GE') Georgia
          option(value='DE') Germany
          option(value='GH') Ghana
          option(value='GI') Gibraltar
          option(value='GR') Greece
          option(value='GL') Greenland
          option(value='GD') Grenada
          option(value='GP') Guadeloupe
          option(value='GU') Guam
          option(value='GT') Guatemala
          option(value='GG') Guernsey
          option(value='GN') Guinea
          option(value='GW') Guinea-bissau
          option(value='GY') Guyana
          option(value='HT') Haiti
          option(value='HM') Heard Island and Mcdonald Islands
          option(value='VA') Holy See (Vatican City State)
          option(value='HN') Honduras
          option(value='HK') Hong Kong
          option(value='HU') Hungary
          option(value='IS') Iceland
          option(value='IN') India
          option(value='ID') Indonesia
          option(value='IR') Iran, Islamic Republic of
          option(value='IQ') Iraq
          option(value='IE') Ireland
          option(value='IM') Isle of Man
          option(value='IL') Israel
          option(value='IT') Italy
          option(value='JM') Jamaica
          option(value='JP') Japan
          option(value='JE') Jersey
          option(value='JO') Jordan
          option(value='KZ') Kazakhstan
          option(value='KE') Kenya
          option(value='KI') Kiribati
          option(value='KP') Korea, Democratic People's Republic of
          option(value='KR') Korea, Republic of
          option(value='KW') Kuwait
          option(value='KG') Kyrgyzstan
          option(value='LA') Lao People's Democratic Republic
          option(value='LV') Latvia
          option(value='LB') Lebanon
          option(value='LS') Lesotho
          option(value='LR') Liberia
          option(value='LY') Libyan Arab Jamahiriya
          option(value='LI') Liechtenstein
          option(value='LT') Lithuania
          option(value='LU') Luxembourg
          option(value='MO') Macao
          option(value='MK') Macedonia, The Former Yugoslav Republic of
          option(value='MG') Madagascar
          option(value='MW') Malawi
          option(value='MY') Malaysia
          option(value='MV') Maldives
          option(value='ML') Mali
          option(value='MT') Malta
          option(value='MH') Marshall Islands
          option(value='MQ') Martinique
          option(value='MR') Mauritania
          option(value='MU') Mauritius
          option(value='YT') Mayotte
          option(value='MX') Mexico
          option(value='FM') Micronesia, Federated States of
          option(value='MD') Moldova, Republic of
          option(value='MC') Monaco
          option(value='MN') Mongolia
          option(value='ME') Montenegro
          option(value='MS') Montserrat
          option(value='MA') Morocco
          option(value='MZ') Mozambique
          option(value='MM') Myanmar
          option(value='NA') Namibia
          option(value='NR') Nauru
          option(value='NP') Nepal
          option(value='NL') Netherlands
          option(value='AN') Netherlands Antilles
          option(value='NC') New Caledonia
          option(value='NZ') New Zealand
          option(value='NI') Nicaragua
          option(value='NE') Niger
          option(value='NG') Nigeria
          option(value='NU') Niue
          option(value='NF') Norfolk Island
          option(value='MP') Northern Mariana Islands
          option(value='NO') Norway
          option(value='OM') Oman
          option(value='PK') Pakistan
          option(value='PW') Palau
          option(value='PS') Palestinian Territory, Occupied
          option(value='PA') Panama
          option(value='PG') Papua New Guinea
          option(value='PY') Paraguay
          option(value='PE') Peru
          option(value='PH') Philippines
          option(value='PN') Pitcairn
          option(value='PL') Poland
          option(value='PT') Portugal
          option(value='PR') Puerto Rico
          option(value='QA') Qatar
          option(value='RE') Reunion
          option(value='RO') Romania
          option(value='RU') Russian Federation
          option(value='RW') Rwanda
          option(value='SH') Saint Helena
          option(value='KN') Saint Kitts and Nevis
          option(value='LC') Saint Lucia
          option(value='PM') Saint Pierre and Miquelon
          option(value='VC') Saint Vincent and The Grenadines
          option(value='WS') Samoa
          option(value='SM') San Marino
          option(value='ST') Sao Tome and Principe
          option(value='SA') Saudi Arabia
          option(value='SN') Senegal
          option(value='RS') Serbia
          option(value='SC') Seychelles
          option(value='SL') Sierra Leone
          option(value='SG') Singapore
          option(value='SK') Slovakia
          option(value='SI') Slovenia
          option(value='SB') Solomon Islands
          option(value='SO') Somalia
          option(value='ZA') South Africa
          option(value='GS') South Georgia and The South Sandwich Islands
          option(value='ES') Spain
          option(value='LK') Sri Lanka
          option(value='SD') Sudan
          option(value='SR') Suriname
          option(value='SJ') Svalbard and Jan Mayen
          option(value='SZ') Swaziland
          option(value='SE') Sweden
          option(value='CH') Switzerland
          option(value='SY') Syrian Arab Republic
          option(value='TW') Taiwan, Province of China
          option(value='TJ') Tajikistan
          option(value='TZ') Tanzania, United Republic of
          option(value='TH') Thailand
          option(value='TL') Timor-leste
          option(value='TG') Togo
          option(value='TK') Tokelau
          option(value='TO') Tonga
          option(value='TT') Trinidad and Tobago
          option(value='TN') Tunisia
          option(value='TR') Turkey
          option(value='TM') Turkmenistan
          option(value='TC') Turks and Caicos Islands
          option(value='TV') Tuvalu
          option(value='UG') Uganda
          option(value='UA') Ukraine
          option(value='AE') United Arab Emirates
          option(value='GB') United Kingdom
          option(value='US') United States
          option(value='UM') United States Minor Outlying Islands
          option(value='UY') Uruguay
          option(value='UZ') Uzbekistan
          option(value='VU') Vanuatu
          option(value='VE') Venezuela
          option(value='VN') Viet Nam
          option(value='VG') Virgin Islands, British
          option(value='VI') Virgin Islands, U.S.
          option(value='WF') Wallis and Futuna
          option(value='EH') Western Sahara
          option(value='YE') Yemen
          option(value='ZM') Zambia
          option(value='ZW') Zimbabwe
      span.help-block <%- errfor.country %>

    div.form-group
        button.btn.btn-primary.btn-update(type='button') Update

  script(type='text/template', id='tmpl-identity')
    fieldset
      legend Identity
      div.alerts
        |<% _.each(errors, function(err) { %>
        div.alert.alert-danger.alert-dismissable
          button.close(type='button', data-dismiss='alert') &times;
          |<%- err %>
        |<% }); %>
        |<% if (success) { %>
        div.alert.alert-info.alert-dismissable
          button.close(type='button', data-dismiss='alert') &times;
          | Changes have been saved.
        |<% } %>
      div.form-group(class!='<%- errfor.username ? "has-error" : "" %>')
        label Username:
        input.form-control(type='text', name='username', value!='<%= username %>')
        span.help-block <%- errfor.username %>
      div.form-group(class!='<%- errfor.email ? "has-error" : "" %>')
        label Email:
        input.form-control(type='text', name='email', value!='<%= email %>')
        span.help-block <%- errfor.email %>
      div.form-group
        button.btn.btn-primary.btn-update(type='button') Update

  script(type='text/template', id='tmpl-password')
    fieldset
      legend Set Password
      div.alerts
        |<% _.each(errors, function(err) { %>
        div.alert.alert-danger.alert-dismissable
          button.close(type='button', data-dismiss='alert') &times;
          |<%- err %>
        |<% }); %>
      |<% if (success) { %>
      div.alert.alert-info.alert-dismissable
        button.close(type='button', data-dismiss='alert') &times;
        | A new password has been set.
      |<% } %>
      div.form-group(class!='<%- errfor.newPassword ? "has-error" : "" %>')
        label New Password:
        input.form-control(type='password', name='newPassword', value!='<%= newPassword %>')
        span.help-block <%- errfor.newPassword %>
      div.form-group(class!='<%- errfor.confirm ? "has-error" : "" %>')
        label Confirm Password:
        input.form-control(type='password', name='confirm', value!='<%= confirm %>')
        span.help-block <%- errfor.confirm %>
      div.form-group
        button.btn.btn-primary.btn-password(type='button') Set Password

  script(type='text/template', id='data-account') !{data.account}
  script(type='text/template', id='data-user') !{data.user}
